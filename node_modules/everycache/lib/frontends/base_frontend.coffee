_ = require('underscore')

class BaseFrontend
    ###
    Базовый класс кэш-фронтэнда.
    ###
    constructor: (@_options={}) ->
        @_backend = @_options.backend

    get: (key, callback) =>
        ###
        Получает значение из кэша.
        @param key: string
        @param callback: function
        ###
        @_backend.get(key, callback)

    multipleGet: (keys, callback) =>
        return callback(null, {}) if not keys.length
        @_backend.multipleGet(keys, callback)

    set: (key, value, callback) =>
        ###
        Добавляет значение в кэш.
        @param key: string
        @param callback: function
        ###
        @_backend.set(key, value, callback)

    multipleSet: (data, callback) =>
        return callback(null, 'Ok') if _.isEmpty(data)
        @_backend.multipleSet(data, callback)

    remove: (key, callback) =>
        ###
        Удаляет из кэша значение.
        @param key: string
        @param callback: function
        ###
        @_backend.remove(key, callback)

    multipleRemove: (keys, callback) =>
        @_backend.multipleRemove(keys, callback)

    clear: (callback) =>
        ###
        Очищает кэш.
        @param callback: function
        ###
        @_backend.clear(callback)

module.exports = BaseFrontend